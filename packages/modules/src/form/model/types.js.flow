// @flow

declare type Module = {
  name: string,
  type: string,
  modules?: Array<Module>,
  validation?: {
    [key: string]: string | boolean,
  },
  [key: string]: Module | Array<Module> | string | Object | number | boolean,
};

declare type Form = {
  modules: Array<Module>,
};
type FormBuilderFactory = {
  type: string,
  [prop: string]: string | boolean | Array<string>,
};

type ModuleEditorMeta = {
  category: string,
  properties?: {
    [key: string]: FormBuilderFactory,
  },
  defaults?: {
    [key: string]: any,
  },
};

declare type ModuleControlMeta = {
  type: string,
  title?: string,
  description?: string,
  previewUrl?: string,
  report?: Array<string>,
  isInput?: boolean,
  validation?: {
    [validatorName: string]: (value: any) => boolean,
  },
  editor?: ModuleEditorMeta,
  verificationScore?: (value: any) => number,
};

declare type ModuleControl = {
  module: ModuleControlMeta,
};

declare type ModuleControlsMap = {
  [key: string]: ModuleControl,
};
